# Web Player Node Debug Guide\n\n## Issue Description\nPlayer node is missing when running the Pacman scene on web platform.\n\n## Debugging Steps Implemented\n\n### 1. Node Verification System\n- Added `verify_scene_nodes()` function that checks all critical nodes\n- Waits one frame before initialization to handle web loading delays\n- Provides detailed error messages for missing nodes\n\n### 2. Backup Player Creation\n- If original Player node fails to load, automatically creates a backup\n- Includes proper sprite, collision shape, and positioning\n- Uses the same texture and properties as the original\n\n### 3. Web-Specific Debugging\n- Extensive debug output when running on web platform\n- Tracks player node existence at each initialization step\n- Shows exact positions and states throughout setup\n\n## How to Debug\n\n### Step 1: Check Debug Console\nWhen running on web, look for these messages in the browser console:\n\n```\n[WEB DEBUG] Setting up Pacman game...\n[WEB DEBUG] Player node: [CharacterBody2D:1234]\n[WEB DEBUG] Player position: (984, 736)\n[WEB DEBUG] Player controller: [PacmanPlayer:5678]\n```\n\n### Step 2: Look for Error Messages\nIf you see any of these, it indicates the specific problem:\n\n- `\"ERROR: Player node not found!\"` - Scene loading issue\n- `\"ERROR: TileMapLayer node not found!\"` - Tilemap loading issue  \n- `\"Player node is null! Cannot initialize player controller.\"` - Initialization failure\n\n### Step 3: Check Backup System\nIf the original player fails, look for:\n\n```\n\"ERROR: Player node not found! Attempting to create backup player...\"\n\"Backup player created successfully!\"\n```\n\n### Step 4: Verify Final State\nAt the end of setup, you should see:\n\n```\n[WEB DEBUG] Game setup completed. Final player position: (160, 32)\n```\n\n## Common Web Issues and Solutions\n\n### Issue 1: @onready Variables Fail\n**Cause**: Web platform loading timing differences\n**Solution**: Added manual node fetching in `verify_scene_nodes()`\n\n### Issue 2: Scene Nodes Load Out of Order\n**Cause**: Asynchronous loading on web\n**Solution**: Added `await get_tree().process_frame` delay\n\n### Issue 3: Player Node Exists But Controller Fails\n**Cause**: Null references in initialization chain\n**Solution**: Added validation at each step with detailed error messages\n\n## Testing Checklist\n\n1. ✅ Run game on web platform\n2. ✅ Open browser developer console (F12)\n3. ✅ Navigate to Pacman scene\n4. ✅ Look for \"[WEB DEBUG]\" messages\n5. ✅ Verify player appears and can move\n6. ✅ Check that no error messages appear\n\n## Manual Verification\n\nIf issues persist, add this temporary code to `_ready()`:\n\n```gdscript\nfunc _ready():\n    print(\"=== MANUAL DEBUG ===\")\n    print(\"Scene children: \", get_children())\n    for child in get_children():\n        print(\"  Child: \", child.name, \" Type: \", child.get_class())\n    print(\"Player node direct fetch: \", get_node_or_null(\"Player\"))\n    print(\"====================\")\n    # ... rest of _ready code\n```\n\n## Expected Web Console Output\n\n```\nScene node verification completed successfully!\nPlayer controller initialized successfully with player at: (984, 736)\n[WEB DEBUG] Setting up Pacman game...\n[WEB DEBUG] Player node: [CharacterBody2D:1234]\n[WEB DEBUG] Player position: (984, 736)\n[DEBUG] Player starting position set to: (5, 1)\n[WEB DEBUG] Game setup completed. Final player position: (160, 32)\n```\n\n## Next Steps\n\nIf the player still doesn't appear after these fixes:\n\n1. Check if the player is being hidden by UI scaling\n2. Verify the tilemap isn't covering the player\n3. Check if the player is spawning off-screen\n4. Confirm collision layers aren't interfering\n\n## Contact Information\n\nIf you continue to experience issues, please provide:\n- Browser console output (full log)\n- Which specific debug messages you see\n- Whether the backup player creation triggers\n- Any additional error messages\n